# 正则表达式
## 1.正则简介
### 简介
正则表达式(英语: Regular Expression, 在代码中常简写为 regex 或 RE),计算机科学的一个概念。正则表达式使用单个字符串来描述、匹配一系列符合某个句法规则的字符串。在很多文本编辑器里，正则表达式通常被用来检索、替换那些符合某个模式的文本。许多程序设计语言都支持利用正则表达式进行字符串操作。

### 历史
参考百度百科

### 定义和用途
+ 正则表达式也叫 模式表达式
+ 正则配合特定的函数，可实现字符串的匹配、查找、替换、分割等操作
+ 正则本质上也是一个字符串。
+ 常规的正则用途： 匹配手机号，邮箱验证，日期，帐号密码格式。

## 2.PHP正则的基本知识
`在PHP程序中，正则表达式必须配合 正着处理函数 才能使用。`
`PHP中支持正则表达式的处理函数是有 PCRE 库提供的，使用 preg_作为前缀`


| PCRE 库正则表达式函数     | 功能说明        |
| -----------------------  | ----------- |
| preg_match()     		   | 执行正则表达式的匹配        |
| preg_match_all()         | 执行全局正则表达式匹配        |
| preg_replace()           | 执行正则表达式的搜索和替换        |
| preg_split()     		   | 用正则表达式分割字符串        |
| preg_grep()     		   | 返回与模式匹配的数组单元        |
| preg_replace_callback()  | 用回调函数执行正则表达式的搜索和替换        |

`准备测试代码:`
$str = '此处输入要匹配的字符串';
$regExp = '此处提供正则表达式';

// 匹配验证
```
if ( preg_match($regExp, $str, $arr)) {
	echo '正则表达式:
		<font size="5" color="#00f">' . $regExp . '</font><br>
		匹配字串:
		<font size="5" color="#00f">' . $str . '</font><hr>
		匹配结果:
		<font size="5" color="#0a0">成功</font><br>';
	echo '<pre>';
	print_r($arr); // 输出匹配到的结果
	echo '</pre>';
} else {
	echo '正则表达式:
	<font size="5" color="#00f">' . $regExp . '</font><br>
	匹配字串:
	<font size="5" color="#00f">' . $str . '</font><hr>
	匹配结果:
	<font size="5" color="#00f">失败</font><br>';
}
```

`PS.测试正则`

+ 在线工具
+ 在线正则表达式测试
+ 正则表达式工具 Match Tracer

## 3.正则语法规则
PHP中的正则表达式,由四部分构成:
- 定界符
- 原子
- 元字符
* 模式修正符

>一个最简单的正则,至少要包含 `定界符` 和`一个原子`
### 1.定界符
每个正则表达式 都必须有`一对定界符`.
除了数字、字母、反斜线以外的任意一个字符，都可以用来做为正则表达式的界定符。
如:`~!@#$%^&*_+:;<>.?|/(){}[]`,推荐使用`/`

### 2.原子
>原子是组成正则表达式的最小单位,`一个原子 匹配 一个字符`。

#### 2.1普通字符

`数字、字母、下划线： 0~9 a~z A~Z _`
#### 2.2特殊字符

`'' "" / . * + ? | () [] & ^ \`
>某些特殊字符 在正则里具有特殊意义，匹配此类字符时，需要在正则里 使用反斜线 \ 来转义，将其变成普通的原子

#### 2.3非打印字符
```
1 	\f  --  匹配 分页符
2 	\r  --  匹配 回车符
3 	\n  --  匹配 换行符
4 	\t  --  匹配 水平制表符
5 	\v  --  匹配 垂直制表符
```

#### 2.4通用字符类型
```
1. \d  --  匹配 任意一个十进制数字[0~9]
2. \D  --  匹配 任意一个十进制数字以外的字符
3. 
4. \s  --  匹配 任意一个空白字符 [空格 tab \f\r\n\t\v]
5. \S  --  匹配 任意一个除了空白字符以外的字符
6. 
7. \w  --  匹配 任意一个数字/字母/下划线[0~9 a~z A~Z _]
8. \W  --  匹配 除数字/字母/下划线以外的任意一个字符
```
#### 2.5原子表
>用[]中括号来表示 自定义的原子,依旧是只匹配一个字符
```
[abc]   --  匹配 原子表中的 任意一个字符
[^abc]  --  匹配 除表内原子以外的 任意一个字符

另外,在原子表中可以使用 -(减号),来连接一组 ASCII码顺序排列的原子
[a-z]  --   匹配 从 a 到 z 的任意一个字符
```
#### 3.元字符
> 用来修饰其前面的 原子 出现的 次数 或 位置
> 元字符不能单独出现,它必须是用来修饰原子的

#### 3.1限定符
>用来指定 前面的原子 出现多少次 才能满足匹配
```
*		--  匹配 其前面的原子 0次 1次 多次(任意多次)	--{0,}
+		--  匹配 其前面的原子 1次 多次(至少一次)		--{1,}
?		--  匹配 其前面的原子 0次 1次					--{0,1}
{n}		--  匹配 其前面的一个原子 正好 n 次
{n,}	--  匹配 其前面的一个原子 至少 n 次(大于等于n次)
{n,m}	--  匹配 其前面的一个原子 至少 n 次,最多 m次
```
#### 3.2边界限制
```
^ 或 \A  --  匹配 字符串 开始的位置,表示必须以 某个字符串开头
$ 或 \Z  --  匹配 字符串 结束的位置,表示必须以 某个字符串结束

\b 		 --  匹配 单词边界
\B 		 --  匹配 非单词边界,除单词边界以外的部分
写在前,就是限定该单词的前方,写在后,就是限定后方
```
> ^ 和 $ 配合使用,常用于字符串长度验证

#### 3.3句号
`.`匹配 任何一个字符,除了换行符(\n)。

#### 3.4模式单元
`()`把括号中的内容当成一个整体,当作一个大原子。
> ()内标记的原子,也叫做子模式。

#### 3.5模式选择符
`|`在多个模式之间,选择匹配到的那一个。（有点类似逻辑或）
匹配是从左至右执行的，所以`容易`匹配的值放`右边`;`不易`匹配到的房`左边`。

#### 3.6后向引用
1. \1	\2	\3			--  匹配 第1个、第2个、第3个 子模式的内容  

2. \\\\1	\\\\2	\\\\3		--  匹配 第1个、第2个、第3个 子模式的内容(转义\\)

用`()`标记的原子是一个子模式,也是一个独立的单元,所有子模式匹配的内容,都会被储存在临时缓存区,以备后用.

缓存区编号规则是:
从左向右,以左括号为 缓存标志,从 1 开始,连续编号,最大至99个子表达式.
每个缓存区都可以使用`\1`或者`\\1`的形式去访问.
> 非捕获模式(忽略匹配)
> 当需要用到 模式单元, 又不想存储某个匹配子模式时,
> 可使用 非捕获元字符`(?:)`来忽略子模式的匹配.
--- 


#### 4.模式修正符
> 模式修正符 必须放在正则表达式之外使用。(右定界符之后)
> 它是用来扩展 正则的某些功能。
> 模式修正符可以组合使用。



